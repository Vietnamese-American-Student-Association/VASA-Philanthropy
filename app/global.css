@import url('https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap');

:root { --background:#ffffff; --foreground:#171717; }
@media (prefers-color-scheme: dark) {
  :root { --background:#0a0a0a; --foreground:#ededed; }
}

/* ===== Reset ===== */
*,
*::before,
*::after { box-sizing: border-box; }
* { margin: 0; }
html, body { height: 100%; padding: 0; }
/* Safari-safe: avoid 'clip' on older WebKit */
html, body { overflow-x: hidden; }

body {
  min-height: 100vh; /* Fallback for better iOS compatibility */
  min-height: 100svh;
  display: flex;
  flex-direction: column;
  color: #171717;
  background: #E8EDDF;
  font-family: 'Rubik', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a { color: inherit; text-decoration: none; }
.no-scroll { overflow: hidden; height: 100vh; height: 100svh; }

/* ===== Layout shells ===== */
#page-container { display:flex; flex-direction:column; min-height:100vh; min-height:100svh; }
.content-wrapper {
  flex:1; max-width:1200px; margin:0 auto; padding:0 2vw; width:100%; 
  contain:layout style; padding-top: 4em;/* Critical: Isolate layout calculations for iOS Safari */
}
main {
  flex:1; display:flex; flex-direction:column; max-width:1200px; margin:7vw auto; padding:0 2vw; width:100%;
}

/* ===== Desktop header (fixed) ===== */
header {
  background:#F6C452; color:#171717; padding:2vw 0;
  display:flex; align-items:center; justify-content:center;
  position:fixed; top:0; width:100%; z-index:1000; 
  contain:paint; /* Optimize rendering */
}
header h1 {
  color:#171717; font-size:2vw; font-weight:700; white-space:nowrap; letter-spacing:-0.01vw; margin-right:7vw; line-height:1.2;
}
header nav { display:flex; gap:0.5vw; align-items:center; }
header nav a { color:#171717; font-size:1vw; font-weight:400; line-height:1.5; text-decoration:none; transition:text-decoration .2s; }
header nav a:hover { text-decoration:underline; }
header nav span { margin:0.25vw; color:#171717; }

/* ===== Footer (desktop) ===== */
footer {
  background:#F6C452; color:#171717; padding:2vw 1vw; text-align:center; width:100%;
  flex-shrink:0; margin-top:auto;
}

/* ===== Officer grid ===== */
.mobile-officer-grid { display:grid; gap:1.5rem; margin-bottom:2vw; }
.officer-grid {
  display:grid; grid-template-columns:repeat(1,1fr); gap:1.5rem; margin-bottom:2vw;
  margin-left:auto; margin-right:auto; max-width:1200px; justify-items:center; justify-content:center; box-sizing:border-box;
}
@media (min-width:640px){ .officer-grid{ grid-template-columns:repeat(2,1fr);} }
@media (min-width:768px){ .officer-grid{ grid-template-columns:repeat(3,1fr);} }
@media (min-width:1024px){ .officer-grid{ grid-template-columns:repeat(3,1fr);} }

.officer-card { background:#fff; padding:1rem; border-radius:12px; text-align:center; box-shadow:0 0 10px rgba(0,0,0,0.05); margin:0 auto; }
.officer-card img { 
  padding-bottom:1em; width:100%; height:auto; object-fit:cover; border-radius:10px;
  /* CRITICAL: Add explicit dimensions to prevent layout thrashing on iOS */
  max-width: 400px;
  max-height: 400px;
}
.officer-card h3 { color:#171717; font-weight:700; font-size:clamp(16px,1.125vw,22px); margin-bottom:0.25vw; }
.officer-card p { color:#555; font-size:clamp(14px,1vw,18px); }

/* ===== Toggle header ===== */
.board-header {
  font-family:'Rubik', sans-serif;
  font-size:clamp(18px,1.75vw,28px);
  display:flex; justify-content:space-between; align-items:center;
  margin:3vw auto; max-width:1200px; padding-left:2.37vw; padding-right:2vw;
}
.board-toggle-container { display:flex; }
.board-toggle-btn {
  padding:0.75vw 1.5vw; border-radius:0.375rem; font-weight:700;
  background:transparent; color:#171717; margin-right:.65vw; transition:background .2s,color .2s;
  border:4px solid #F6C452; cursor:pointer;
}
.board-toggle-btn.active { background:#F6C452; color:#171717; }

/* ===== Footer content ===== */
.icon-text { display:flex; align-items:center; gap:1vw; }
.footer-content {
  display:flex; justify-content:center; align-items:flex-start; gap:6vw; max-width:1200px; margin:0 auto; padding:2vw 0;
}
.footer-socials, .footer-contact { flex:1 1 0; min-width:220px; text-align:left; }
.footer-socials h2, .footer-contact h2 { font-weight:700; font-size:2vw; margin-bottom:1vw; }
.footer-email { font-size:1.2vw; margin-bottom:1vw; }
.vasa-logo { width:6vw; height:auto; margin-top:1vw; }
.footer-icon { display:flex; align-items:center; font-size:2vw; }
.footer-social-row { margin-bottom:1.5vw; }

/* ===== Inputs ===== */
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button { -webkit-appearance:none; margin:0; }
input[type="number"] { -moz-appearance:textfield; appearance:textfield; }

/* ===== Landing hero - OPTIMIZED FOR IOS SAFARI ===== */
.landing-hero { 
  position:relative; width:100%; min-height:85vh; /* Use vh instead of svh for compatibility */
  contain:paint layout; /* Critical: Add layout containment for iOS Safari */
}
.landing-bg-image { 
  object-fit:cover !important; filter:brightness(0.8); z-index:0;
  /* REMOVED: will-change:transform; - This causes memory issues on iOS Safari */
}
.landing-donation-overlay {
  position:absolute; inset:0; display:flex; align-items:flex-start; justify-content:flex-start; padding:7vw; z-index:1;
}

/* ===== Logo under hero ===== */
.landing-logo-container {
  display:flex; justify-content:flex-end; align-items:center; background:transparent;
  margin-top:-100px; margin-bottom:2rem; margin-right:5rem; z-index:2; position:relative;
}

/* ===== Sections ===== */
.section-bg { background:#E8EDDF; padding:3rem 0; }
.section-bg-top { background:#E8EDDF; padding:3rem 0 0; }
.section-container { 
  max-width:1200px; margin:0 auto; padding:0 2rem;
  contain:layout style; /* Isolate layout calculations */
}
.section-heading { font-weight:800; font-size:2.5rem; color:#664C43; margin-bottom:2rem; letter-spacing:1px; text-align:left; }

/* ===== Pillars - OPTIMIZED FOR IOS SAFARI ===== */
.pillar-row { position:relative; width:100%; height:350px; overflow:hidden; cursor:pointer; }
.pillar-image { 
  object-fit:cover; object-position:bottom; filter:brightness(0.85); transition:filter .3s;
  /* CRITICAL: Reset will-change to auto to prevent GPU layer issues */
  will-change: auto;
}
.pillar-row:hover .pillar-image { filter:brightness(0.5); }
.pillar-overlay { position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; pointer-events:none; text-align:center; }
.pillar-label {
  color:#fff; font-weight:900; font-size:2rem; letter-spacing:2px; text-shadow:0 2px 8px rgba(0,0,0,0.5);
  margin-bottom:0.5rem; opacity:1; transition:transform .3s; transform:translateY(0); pointer-events:none;
}
.pillar-row:hover .pillar-label { transform:translateY(-1.5rem); }
.pillar-desc {
  color:#fff; font-size:0.95rem; text-shadow:0 2px 8px rgba(0,0,0,0.5);
  opacity:0; transform:translateY(20px); transition:opacity .3s, transform .3s; pointer-events:none;
  padding:0 5rem; max-width:900px;
}
.pillar-row:hover .pillar-desc { opacity:1; transform:translateY(0); }

/* ===== Donation blurb ===== */
.donation-info { background:#E8EDDF; padding:4rem 2rem; text-align:center; font-weight:600; font-size:1.5rem; color:#222; line-height:1.2; margin-top:0; }
.donation-info-inner { max-width:900px; margin:0 auto; }

/* ===== Mobile footer ===== */
.mobile-footer {
  background:#F3C654; padding:1.5rem 1rem; text-align:center; color:#171717;
  border-top:1px solid rgba(0,0,0,0.05);
}
.mobile-footer-top { display:flex; align-items:center; justify-content:center; gap:1rem; margin-bottom:1rem; }
.mobile-footer-logo { width:50px; height:auto; }
.mobile-footer-contact .email { font-size:0.9rem; font-weight:500; word-break:break-word; }
.mobile-footer-socials { display:flex; justify-content:center; gap:1.5rem; font-size:1.5rem; }
.mobile-footer-socials a { color:#171717; transition:color .2s; }
.mobile-footer-socials a:hover { color:#5A3B31; }
.mobile-footer-message { text-align:center; font-size:1rem; font-weight:700; padding:0.5rem 1rem 1rem; color:#171717; position:relative; left:0; }

/* ===== Mobile text tweaks ===== */
@media (max-width:639px){
  .officer-card h3{ font-size:1rem; }
  .officer-card p{ font-size:0.85rem; }
  .board-header h2{ font-size:1.7rem; line-height:1.2; }
}

/* ===== SSR-safe toggles ===== */
.mobile-only{ display:block; }
.desktop-only{ display:none; }
@media (min-width:769px){
  .mobile-only{ display:none; }
  .desktop-only{ display:block; }
}

/* Hide donation overlay on mobile without unmounting */
@media (max-width:768px){ .landing-donation-overlay{ display:none !important; } }

/* Full-bleed helper */
.pillar-fullwidth { width:100vw; margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw); }

/* Mobile pillar text */
@media (max-width:768px){
  .pillar-label, .pillar-desc{ width:100%; display:flex; align-items:center; justify-content:center; }
  .pillar-desc{ padding:0 1rem !important; }
  .pillar-row.active .pillar-desc{ opacity:1; transform:translateY(0); }
}

/* ===== CRITICAL: Mobile hero optimization for iOS Safari ===== */
@media (max-width:768px){
  .landing-hero{ 
    min-height:50vh; /* Use vh instead of svh for better iOS compatibility */
    max-height:50vh; 
    overflow:hidden; 
    padding-top:56px; /* room for fixed mobile header */
  }
  .landing-bg-image{ height:100% !important; width:100% !important; }
}

/* ===== Mobile header (FIXED) + dropdown - OPTIMIZED ===== */
.mobile-header{
  background:#F3C654; padding:0.75rem 1rem;
  position:fixed; top:0; left:0; right:0; z-index:1100; /* above hero/overlay */
  display:flex; flex-direction:column; width:100%;
}
.mobile-header-top{ display:flex; justify-content:space-between; align-items:center; width:100%; }
.mobile-header-title h1 {
  margin: 0;
  color: #171717;
}

.menu-btn{
  background:none; border:none; cursor:pointer; width:36px; height:28px; position:relative; 
  display:inline-flex; align-items:center; justify-content:center;
  /* Add focus styles for accessibility */
  outline: none;
}
.menu-btn:focus {
  outline: 2px solid #171717;
  outline-offset: 2px;
}

.menu-bar{
  position:absolute; display:block; width:28px; height:3px; background:#171717; border-radius:2px;
  transition:transform 200ms ease, opacity 200ms ease, top 200ms ease, bottom 200ms ease;
}
.menu-bar:nth-child(1){ top:6px; }
.menu-bar:nth-child(2){ top:50%; transform:translateY(-50%); }
.menu-bar:nth-child(3){ bottom:6px; }
.menu-btn.open .menu-bar:nth-child(1){ top:50%; transform:translateY(-50%) rotate(45deg); }
.menu-btn.open .menu-bar:nth-child(2){ opacity:0; }
.menu-btn.open .menu-bar:nth-child(3){ bottom:auto; top:50%; transform:translateY(-50%) rotate(-45deg); }

/* Dropdown panel - OPTIMIZED FOR MEMORY */
.mobile-dropdown-nav{
  position:absolute; top:100%; left:0; width:100%;
  background:#5A3B31; display:flex; flex-direction:column; gap:1rem;
  max-height:0; opacity:0; overflow:hidden;
  /* SIMPLIFIED: Remove transform transitions that cause memory issues */
  transition:max-height 200ms ease, opacity 200ms ease, padding 200ms ease;
  z-index:1101; /* ABOVE the fixed header and hero */
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
.mobile-dropdown-nav.open{ 
  max-height:400px; /* Increased slightly for better spacing */
  opacity:1; 
  padding:1.25rem; 
}
.mobile-dropdown-nav a{ 
  color:#fff; font-size:1.125rem; text-transform:uppercase; font-weight:600; text-decoration:none;
  padding: 0.5rem 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  transition: color 0.2s ease;
}
.mobile-dropdown-nav a:last-child {
  border-bottom: none;
}
.mobile-dropdown-nav a:hover {
  color: #F3C654;
}

/* Overlay for closing menu when clicking outside */
.mobile-menu-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1099; /* Below header but above content */
  opacity: 0;
  animation: fadeIn 200ms ease forwards;
}

@keyframes fadeIn {
  to {
    opacity: 1;
  }
}

/* ===== CRITICAL: Walking GIF optimization - DISABLED ON MOBILE ===== */
.walk-container{
  width:350px; height:80px; position:absolute; top:110px; left:27%; transform:translateX(-110%);
  pointer-events:none; overflow:hidden;
}
.walk{
  position:absolute; bottom:0; width:150px; height:auto; 
  animation:walk-horizontal 8s ease-in-out infinite alternate;
  /* REMOVED: will-change:transform; - Causes memory issues */
}

/* CRITICAL: Disable animations on mobile to prevent iOS Safari crashes */
@media (max-width:768px){ 
  .walk{ 
    animation:none !important; 
    position: static !important; /* Remove absolute positioning */
  }
  .walk-container {
    display: none !important; /* Completely hide on mobile */
  }
}

/* Disable animations for users who prefer reduced motion */
@media (prefers-reduced-motion: reduce){ 
  .walk{ animation:none !important; }
  
  /* CRITICAL: Disable ALL animations for reduced motion users */
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

@keyframes walk-horizontal{ 
  0%{ transform:translateX(0); } 
  100%{ transform:translateX(200px); } 
}

/* ===== CRITICAL: Touch device optimizations ===== */
@media (hover: none) and (pointer: coarse) {
  /* Disable hover effects on touch devices to prevent memory issues */
  .pillar-row:hover .pillar-image {
    filter: brightness(0.85) !important; /* Reset to default on touch devices */
  }
  
  .pillar-row:hover .pillar-label {
    transform: translateY(0) !important; /* Disable hover transform on touch */
  }
  
  .pillar-row:hover .pillar-desc {
    opacity: 0 !important; /* Keep descriptions hidden on touch devices */
    transform: translateY(20px) !important;
  }
}

/* ===== CRITICAL: Prevent iOS Safari memory crashes ===== */
@media (max-width: 768px) {
  /* Reduce GPU layers and complex rendering */
  .pillar-image,
  .landing-bg-image {
    transform: translateZ(0); /* Force hardware acceleration but minimal layer */
    -webkit-transform: translateZ(0);
  }
  
  /* Simplify transitions on mobile */
  .pillar-row .pillar-label,
  .pillar-row .pillar-desc {
    transition: opacity 0.2s ease;
    transform: none !important; /* Remove complex transforms */
  }
  
  /* Optimize viewport calculations */
  body {
    min-height: 100vh; /* Fallback */
    min-height: 100dvh; /* Use dynamic viewport height if supported */
  }
  
  #page-container {
    min-height: 100vh;
    min-height: 100dvh;
  }
}

/* ===== Additional iOS Safari compatibility ===== */
@supports (-webkit-touch-callout: none) {
  /* iOS Safari specific styles */
  .landing-hero {
    min-height: 85vh;
  }
  
  @media (max-width: 768px) {
    .landing-hero {
      min-height: 50vh;
      max-height: 50vh;
    }
  }
}

/* ===== Prevent layout shift and improve performance ===== */
img {
  height: auto;
  max-width: 100%;
  /* Prevent layout shifts */
  display: block;
}

/* Optimize font loading */
@font-face {
  font-family: 'Rubik';
  font-display: swap; /* Improve loading performance */
}